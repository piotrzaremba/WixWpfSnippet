{"source":2,"revision":3,"description":null,"createdBy":{"displayName":"Piotr Zaremba","url":"https://app.vssps.visualstudio.com/A0163a6dc-2597-4a3b-a9ce-241f635efafd/_apis/Identities/e8b3ec19-22ba-4370-b15c-8ec5a5489e19","_links":{"avatar":{"href":"https://ifcs.visualstudio.com/_apis/GraphProfile/MemberAvatars/aad.ODI4ODNjZjQtMTk5NC03MjVkLWE0OTctMWIxZWQxYWI0NmVi"}},"id":"e8b3ec19-22ba-4370-b15c-8ec5a5489e19","uniqueName":"Piotr.Zaremba@intlfcstone.com","imageUrl":"https://ifcs.visualstudio.com/_api/_common/identityImage?id=e8b3ec19-22ba-4370-b15c-8ec5a5489e19","descriptor":"aad.ODI4ODNjZjQtMTk5NC03MjVkLWE0OTctMWIxZWQxYWI0NmVi"},"createdOn":"2017-06-22T21:05:49.117Z","modifiedBy":{"displayName":"Microsoft.VisualStudio.Services.ReleaseManagement","id":"0000000d-0000-8888-8000-000000000000","uniqueName":"0000000d-0000-8888-8000-000000000000@2c895908-04e0-4952-89fd-54b0046d6288","descriptor":"s2s.MDAwMDAwMEQtMDAwMC04ODg4LTgwMDAtMDAwMDAwMDAwMDAwQDJjODk1OTA4LTA0ZTAtNDk1Mi04OWZkLTU0YjAwNDZkNjI4OA"},"modifiedOn":"2017-10-23T04:14:58.270Z","isDeleted":false,"variables":{"HockeyAppApiToken":{"value":"0a9069cc7ee74146827bb64ebf398655"}},"variableGroups":[],"environments":[{"id":8,"name":"Develop","rank":1,"owner":{"displayName":"Piotr Zaremba","url":"https://app.vssps.visualstudio.com/A0163a6dc-2597-4a3b-a9ce-241f635efafd/_apis/Identities/e8b3ec19-22ba-4370-b15c-8ec5a5489e19","_links":{"avatar":{"href":"https://ifcs.visualstudio.com/_apis/GraphProfile/MemberAvatars/aad.ODI4ODNjZjQtMTk5NC03MjVkLWE0OTctMWIxZWQxYWI0NmVi"}},"id":"e8b3ec19-22ba-4370-b15c-8ec5a5489e19","uniqueName":"Piotr.Zaremba@intlfcstone.com","imageUrl":"https://ifcs.visualstudio.com/_api/_common/identityImage?id=e8b3ec19-22ba-4370-b15c-8ec5a5489e19","descriptor":"aad.ODI4ODNjZjQtMTk5NC03MjVkLWE0OTctMWIxZWQxYWI0NmVi"},"variables":{"HockeyAppAppId":{"value":"01636b67b0b94c859bff15f3fe9daad0"},"HockeyAppVersion":{"value":"$(Release.ReleaseName)"}},"variableGroups":[],"preDeployApprovals":{"approvals":[{"rank":1,"isAutomated":true,"isNotificationOn":false,"id":22}]},"deployStep":{"id":23},"postDeployApprovals":{"approvals":[{"rank":1,"isAutomated":true,"isNotificationOn":false,"id":24}]},"deployPhases":[{"deploymentInput":{"parallelExecution":{"parallelExecutionType":"none"},"skipArtifactsDownload":false,"artifactsDownloadInput":{"downloadInputs":[]},"queueId":26,"demands":[],"enableAccessToken":false,"timeoutInMinutes":0,"jobCancelTimeoutInMinutes":1,"condition":"succeeded()","overrideInputs":{}},"rank":1,"phaseType":1,"name":"Run on agent","workflowTasks":[{"taskId":"a8515ec8-7254-4ffd-912c-86772e2b5962","version":"2.*","name":"Replace tokens in **\\*.config","refName":"replacetokens_1","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":10,"definitionType":"task","overrideInputs":{},"inputs":{"rootDirectory":"$(System.DefaultWorkingDirectory)/WIX Toolset-Visual Studio-CI/drop/source/INTL.Wix.Wpf.Client/bin/Release","targetFiles":"**\\*.config","encoding":"auto","writeBOM":"true","actionOnMissing":"warn","keepToken":"false","tokenPrefix":"#{","tokenSuffix":"}","emptyValue":"(empty)"}},{"taskId":"e213ff0f-5d5c-4791-802d-52ea3e7be1f1","version":"1.*","name":"PowerShell Script: Replace WXS version.","refName":"PowerShell_2","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","overrideInputs":{},"inputs":{"scriptType":"inlineScript","scriptName":"","arguments":"","inlineScript":"$Path = \"$(System.DefaultWorkingDirectory)/WIX Toolset-Visual Studio-CI/drop/source/INTL.Wix.Wpf.Client.Msi/Product.wxs\"\n\n$xml = [xml](get-content $Path)\n\n$xml.Load($Path)\n\n# Remove the \"20\" from \"2017\" to compile with Wix restrictions of Major numbers max\n# range is from 0 to 256.\n\n$version=\"$(Release.ReleaseName)\"\n$subStringVersion=$version.SubString(2)\n\n$xml.Wix.Product.Version=$subStringVersion\n\n$xml.Save($Path)","workingFolder":"","failOnStandardError":"true"}},{"taskId":"71a9a2d3-a98a-4caa-96ab-affca411ecda","version":"1.*","name":"Build solution $(System.DefaultWorkingDirectory)/WIX Toolset-Visual Studio-CI/drop/source/INTL.Wix.Wpf.Client.Msi/INTL.Wix.Wpf.Client.Msi.wixproj","refName":"VSBuild_3","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":10,"definitionType":"task","overrideInputs":{},"inputs":{"solution":"$(System.DefaultWorkingDirectory)/WIX Toolset-Visual Studio-CI/drop/source/INTL.Wix.Wpf.Client.Msi/INTL.Wix.Wpf.Client.Msi.wixproj","vsVersion":"14.0","msbuildArgs":"","platform":"x86","configuration":"Release","clean":"false","maximumCpuCount":"false","restoreNugetPackages":"false","msbuildArchitecture":"x86","logProjectEvents":"true","createLogFile":"false"}},{"taskId":"e213ff0f-5d5c-4791-802d-52ea3e7be1f1","version":"1.*","name":"PowerShell Script: Create & Upload To HockeyApp.net","refName":"PowerShell_4","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":10,"definitionType":"task","overrideInputs":{},"inputs":{"scriptType":"inlineScript","scriptName":"","arguments":"","inlineScript":"$PathToMsi = \"$(System.DefaultWorkingDirectory)/WIX Toolset-Visual Studio-CI/drop/source/INTL.Wix.Wpf.Client.Msi/bin/Release/\"\n$MsiName = \"INTL.Wix.Wpf.Client.Msi.msi\"\n\n$HockeyAppAppID=\"$(HockeyAppAppID)\"\n$HockeyAppApiToken=\"$(HockeyAppApiToken)\"\n$Version=\"$(Release.ReleaseName)\"\n$pathToMsiFile = \"$PathToMsi\"+\"/\"+\"$MsiName\"\n\nWrite-Host \"Msi file found to upload $pathToMsiFile\"\nWrite-Host \"Version from msi file $($Version)\"\n\n$create_url = \"https://rink.hockeyapp.net/api/2/apps/$HockeyAppAppID/app_versions/new\"\n \n$response = Invoke-RestMethod -Method POST -Uri $create_url  -Header @{ \"X-HockeyAppToken\" = $HockeyAppApiToken } -Body @{bundle_version = $Version}\n \n$update_url = \"https://rink.hockeyapp.net/api/2/apps/$($HockeyAppAppID)/app_versions/$($response.id)\"\n\n$releaseNotes = [IO.File]::ReadAllText(\"$(System.DefaultWorkingDirectory)/WIX Toolset-Visual Studio-CI/drop/releasenotes.md\")\nWrite-Host Release Notes\nWrite-Host $releaseNotes\n\n$fileBin = [IO.File]::ReadAllBytes($pathToMsiFile)\n$enc = [System.Text.Encoding]::GetEncoding(\"ISO-8859-1\")\n$fileEnc = $enc.GetString($fileBin)\n$boundary = [System.Guid]::NewGuid().ToString()\n$LF = \"`r`n\"\n\n$bodyLines = (\n\"--$boundary\",\n\"content-transfer-encoding: base64\",\n\"Content-Disposition: form-data; content-transfer-encoding: `\"base64`\"; name=`\"ipa`\"; filename=`\" [System.IO.Path]::GetFileName $pathToMsiFile`\"$LF\",$fileEnc,\n\"--$boundary\",\n\"Content-Disposition: form-data; name=`\"status`\"$LF\",\"2\",\n\"--$boundary\",\n\"Content-Disposition: form-data; name=`\"notes`\"$LF\",\"$releaseNotes\",\n\"--$boundary\",\n\"Content-Disposition: form-data; name=`\"notes_type`\"$LF\",\"1\",\n\"--$boundary\",\n\"Content-Disposition: form-data; name=`\"mandatory`\"$LF\",\"1\",\n\"--$boundary\",\n\"Content-Disposition: form-data; name=`\"mandatory`\"$LF\",\"1\",\n\"--$boundary\",\n\"Content-Disposition: form-data; name=`\"teams`\"$LF\",\"101892\",\n\"--$boundary--$LF\") -join $LF\nInvoke-RestMethod -Uri $update_url -Method PUT -Headers @{ \"X-HockeyAppToken\" = $HockeyAppApiToken } -ContentType \"multipart/form-data; boundary=`\"$boundary`\"\"  -Body $bodyLines","workingFolder":"","failOnStandardError":"true"}}]}],"environmentOptions":{"emailNotificationType":"OnlyOnFailure","emailRecipients":"release.environment.owner;release.creator","skipArtifactsDownload":false,"timeoutInMinutes":0,"enableAccessToken":false,"publishDeploymentStatus":false,"badgeEnabled":false,"autoLinkWorkItems":false,"pullRequestDeploymentEnabled":false},"demands":[],"conditions":[{"name":"ReleaseStarted","conditionType":1,"value":""}],"executionPolicy":{"concurrencyCount":0,"queueDepthCount":0},"schedules":[],"currentRelease":{"id":15,"url":"https://ifcs.vsrm.visualstudio.com/fe26635a-e792-46e3-bc54-e304711c25e9/_apis/Release/releases/15","_links":{}},"retentionPolicy":{"daysToKeep":30,"releasesToKeep":3,"retainBuild":true},"properties":{},"preDeploymentGates":{"id":0,"gatesOptions":null,"gates":[]},"postDeploymentGates":{"id":0,"gatesOptions":null,"gates":[]},"environmentTriggers":[],"badgeUrl":"https://ifcs.vsrm.visualstudio.com/_apis/public/Release/badge/fe26635a-e792-46e3-bc54-e304711c25e9/8/8"}],"artifacts":[{"sourceId":"fe26635a-e792-46e3-bc54-e304711c25e9:26","type":"Build","alias":"WIX Toolset-Visual Studio-CI","definitionReference":{"artifactSourceDefinitionUrl":{"id":"https://ifcs.visualstudio.com/_permalink/_build/index?collectionId=6cb46194-b053-48d3-8cb8-71beb6277cf9&projectId=fe26635a-e792-46e3-bc54-e304711c25e9&definitionId=26","name":""},"defaultVersionBranch":{"id":"","name":""},"defaultVersionSpecific":{"id":"","name":""},"defaultVersionTags":{"id":"","name":""},"defaultVersionType":{"id":"latestType","name":"Latest"},"definition":{"id":"26","name":"WIX Toolset-Visual Studio-CI"},"project":{"id":"fe26635a-e792-46e3-bc54-e304711c25e9","name":"WIX Toolset"}},"isPrimary":true,"isRetained":false}],"triggers":[],"releaseNameFormat":"$(date:yyyy).$(date:MM).$(date:dd)$(rev:.r)","tags":[],"properties":{},"id":8,"name":"INTL.Wix.Wpf.Client.Msi-Mandatory","path":"\\","projectReference":null,"url":"https://ifcs.vsrm.visualstudio.com/fe26635a-e792-46e3-bc54-e304711c25e9/_apis/Release/definitions/8","_links":{"self":{"href":"https://ifcs.vsrm.visualstudio.com/fe26635a-e792-46e3-bc54-e304711c25e9/_apis/Release/definitions/8"},"web":{"href":"https://ifcs.visualstudio.com/fe26635a-e792-46e3-bc54-e304711c25e9/_release?definitionId=8"}}}